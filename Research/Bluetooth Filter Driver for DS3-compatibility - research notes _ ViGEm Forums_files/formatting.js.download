"use strict";define("composer/formatting",["composer/preview","composer/resize","topicThumbs"],function(e,t,i){var n={};var o={picture:function(){var e=this;e.find("#files").click()},upload:function(){var e=this;e.find("#files").click()},thumbs:function(){n.exitFullscreen();var e=this;require(["composer"],function(t){const n=e.get(0).getAttribute("data-uuid");const o=t.posts[n];if(o.action==="topics.post"||o.action==="posts.edit"&&o.isMain){i.modal.open({id:n,pid:o.pid}).then(()=>{e.trigger("thumb.uploaded");t.updateThumbCount(n,e)})}})},tags:function(){var e=this;e.find(".tags-container").toggleClass("hidden")},zen:function(){var e=this;$(window).one("resize",function(){function i(){if(!screenfull.isFullscreen){app.toggleNavbar(true);$("html").removeClass("zen-mode");t.reposition(e);$(window).off("resize",i)}}if(screenfull.isFullscreen){app.toggleNavbar(false);$("html").addClass("zen-mode");e.find(".write").focus();$(window).on("resize",i);$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",screenfull.exit)}});screenfull.toggle(e.get(0));$(window).trigger("action:composer.fullscreen",{postContainer:e})}};var s=[];n.exitFullscreen=function(){if(screenfull.isEnabled&&screenfull.isFullscreen){screenfull.exit()}};n.addComposerButtons=function(){for(var e=0,t=s.length;e<t;e++){$(".formatting-bar .formatting-group #fileForm").before('<li tabindex="-1" data-format="'+s[e].name+'" title="'+(s[e].title||"")+'"><i class="'+s[e].iconClass+'"></i></li>')}};n.addButton=function(e,t,i,n){n=n||e.replace("fa fa-","");o[n]=t;s.push({name:n,iconClass:e,title:i})};n.getDispatchTable=function(){return o};n.addButtonDispatch=function(e,t){o[e]=t};n.addHandler=function(t){t.on("click",".formatting-bar li",function(i){var n=$(this).attr("data-format");var s=$(this).parents('[component="composer"]').find("textarea")[0];if(o.hasOwnProperty(n)){o[n].call(t,s,s.selectionStart,s.selectionEnd,i);e.render(t)}})};return n});
//# sourceMappingURL=formatting.js.map